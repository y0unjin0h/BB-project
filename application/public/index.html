<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Stylish Portfolio - Start Bootstrap Template</title>
        <!-- Favicon-->
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Simple line icons-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.5.5/css/simple-line-icons.min.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
        
    </head>

    <body id="page-top">

        <!-- Navigation-->
        <a class="menu-toggle rounded" href="#"><i class="fas fa-bars"></i></a>
        <nav id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand"><a href="#page-top">BUBBLE BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#page-top">HOME</a></li>
                <li class="sidebar-nav-item"><a href="#about">ABOUT BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#serviceBubble">SERVICE-BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#menu">MENU</a></li>
                <hr style="color:#ffffff">
                <li class="sidebar-nav-item"><a href="#menu1">MENU1</a></li>
                <hr style="color:#ffffff">
                <li class="sidebar-nav-item"><a href="#registerB">REGISTER BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#join">JOIN BUBBLE!</a></li>
                <li class="sidebar-nav-item"><a href="#finalize">FINALIZE BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#query">QUEURY BUBBLE</a></li>
                <li class="sidebar-nav-item"><a href="#history">BUBBLE'S HISTORY</a></li>
                <li class="sidebar-nav-item"><a href="#registerU">REGISTER USER</a></li>
                <hr style="color:#ffffff">
                <li class="sidebar-nav-item"><a href="#more">MORE</a></li>
            </ul>
        </nav>
        <!-- Header-->
        <header class="masthead d-flex align-items-center">
            <div class="container px-4 px-lg-5 text-center">
                <a class="portfolio-item">
                    <img class="logo" src="images/bubbleBubble.png" alt="..." />
                </a>
                <h1 class="mb-1">BUBBLE BUBBLE</h1>
                <h3 class="mb-5"><em>blockchain community-based 
                    service sharing platform</em></h3>
            </div>
        </header>
        <!-- About-->
        <section class="content-section" id="about">
            <div class="container px-4 px-lg-5 text-center">
                    <h1 class="content-section-heading mb-3">ABOUT BUBBLE</h1>
                    <img class="logo" src="images/aboutBubble.png" alt="..." />
                    <p class="lead mb-5">
                        버블버블”은 서비스의 수수료에 해당하는 부담을 완화시키기 위한    커뮤니티 기반 서비스 공유 플랫폼임.
  세탁 서비스에서 시작하여 배달비, 과일 등 1인 가구 혼자서 부담하기 어려운 것들을 나눠서 부담하여 비용을 절감할 수 있는 프로젝트임.
하나의 커뮤니티 버블(대학생 집단)에서 대학생에 특화된 서비스 버블(세탁서비스, 배달비, 신선식품)에 유니 버블(대학생)들이 모인다는 의미의 블록체인 기반 서비스임.
그림 그린거 넣을 생각임 근데 귀찮음
                    </p>
            </div>
        </section>
        <!-- ServiceBubble-->
        <section class="content-section bg-primary" id="serviceBubble">
            <div class="container px-3 px-lg-5 text-center">
                <div class="content-section-heading">
                    <h2 class="mb-5">SERVICE-BUBBLE</h2>
                </div>
                <div class="row gx-3 gx-lg-5">
                    <div class="col-lg-4 col-md-6 mb-5 mb-lg-0">
                        <span class="service-icon rounded-circle mx-auto mb-3"><i class="icon-screen-smartphone"></i></span>
                        <h4><strong>CommDown Bubble</strong></h4>
                        <p class= "mb-0">세탁비, 배달비, 배송비 등 수수료를 down!</p> <!-- 여기 작은 윈도우로 세탁, 배달비, 택배비 윈도우로 띄우면 조켓다-->
                    </div>
                    <div class="col-lg-4 col-md-6 mb-5 mb-lg-0">
                        <span class="service-icon rounded-circle mx-auto mb-3"><i class="icon-pencil"></i></span>
                        <h4><strong>Fresh Bubble</strong></h4>
                        <p class="mb-0">신선한 식품은 조금씩 자주!</p>
                    </div>
                    <div class="col-lg-4 col-md-6 mb-5 mb-md-0">
                        <span class="service-icon rounded-circle mx-auto mb-3"><i class="icon-like"></i></span>
                        <h4><strong>Gathering Bubble</strong></h4>
                        <p class="mb-0">
                            게더링 버블
                            <i class="fas fa-star"></i>
                            와웅
                        </p>
                    </div>
                </div>
            </div>
        </section>
        <!-- menu-->
        <section class="content-section " id="menu">
            <div class="container px-4 px-lg-5">
                <div class="content-section-heading text-center">
                    <h2 class="mb-5">MENU</h2>
                </div>
                <div class="row gx-0">
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#registerB">
                                    <div class="h2">REGISTER BUBBLE</div>
                                    <img class="img-fluid" src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#join">
                                    <div class="h2">JOIN BUBBLE</div>
                                    <img class="img-fluid" src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#finalize">
                                    <div class="h2">FINALIZE BUBBLE</div>
                                    <img class="img-fluid" src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#query">
                                    <div class="h2">QUEURY BUBBLE</div>
                                    <img class="img-fluid" src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#history">
                                    <div class="h2">BUBBLE'S HISTORY</div>
                                    <img class="img-fluid"src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
                    <div class="col-lg-4">
                        <a class="portfolio-item" href="#registerU">
                                    <div class="h2">REGISTER USER</div>
                                    <img class="img-fluid"src="images/bubble3.png" alt="..." />
                        </a>
                    </div>
            </div>
        </section>
        <!-- Call to Action-->
        <section class="content-section bg-primary text-gray fw-bold" id="services">
            <div id="registerB">
                <div class="container px-4 px-lg-5 text-center">
                        <h2 class="mb-5">REGISTER BUBBLE</h2>
                    <label for="name" class="form-label">인증서:</label><br>
                    <input type="text" class="form-control" id="cert1" name="cert" placeholder="appUser8"><br>
                    <label for="btype" class="form-label">버블 타입:</label><br>
                    <input type="text" class="form-control" id="btype1" name="btype" placeholder="washingBubble"><br>
                    <label for="bid" class="form-label">버블 아이디:</label><br>
                    <input type="text" class="form-control" id="bid1" name="bid" placeholder="b1"><br>
                    <label for="uniID" class="form-label">유니버블 아이디:</label><br>
                    <input type="text" class="form-control" id="uniID1" name="uniID" placeholder="u1"><br>
                    <label for="totalprice" class="form-label">버블 전체 가격:</label><br>
                    <input type="text" class="form-control" id="totalprice1" name="totalprice" placeholder="3000"><br>
                    <label for="unicount" class="form-label">참여할 유니버블 수:</label><br>
                    <input type="text" class="form-control" id="unicount1" name="unicount" placeholder="2"><br>
                    <br>
                    <button id="register-btn" class="btn btn-xl btn-outline-primary fw-bold">버블생성</button>&nbsp
                    <br><br>
                    <div>
                        <div id="result-register"></div>
                        <!-- <table id="result-table" class="table table-sm"></table> -->
                    </div>
                </div>
            </div>
            <div class="more" id="join">
                <div class="container px-4 px-lg-5 text-center">
                    <br>
                    <h2>JOIN BUBBLE</h2>
                    <br>
                    <label for="name" class="form-label">인증서:</label><br>
                    <input type="text" class="form-control" id="cert2" name="cert" placeholder="appUser8"><br>
                    <label for="bid" class="form-label">버블아이디:</label><br>
                    <input type="text" class="form-control" id="bid2" name="bid" placeholder="b1"><br>
                    <label for="uniID" class="form-label">유니버블 아이디:</label><br>
                    <input type="text" class="form-control" id="uniID2" name="uniID" placeholder="u8"><br>
                    <br>
                    <button id="join-btn" class="btn btn-xl btn-outline-primary fw-bold">버블 참여</button>&nbsp
                    <br><br>
                    <div>
                        <div id="result-join"></div>
                        <!-- <table id="result-table" class="table table-sm"></table> -->
                    </div>
                </div>
            </div>
            <div class="more" id="finalize">
                <div class="container px-4 px-lg-5 text-center">
                    <br>
                    <h2>FINALIZE BUBBLE</h2>
                    <br>
                    <label for="name" class="form-label">인증서:</label><br>
                    <input type="text" class="form-control" id="cert3" name="cert" placeholder="appUser8"><br>
                    <label for="bid" class="form-label">버블아이디:</label><br>
                    <input type="text" class="form-control" id="bid3" name="bid" placeholder="b1"><br>
                    <label for="uniID" class="form-label">유니버블 아이디:</label><br>
                    <input type="text" class="form-control" id="uniID3" name="uniID" placeholder="u1"><br>
                    <br>
                    <button id="final-btn" class="btn btn-xl btn-outline-primary fw-bold">버블 확정</button>&nbsp
                    <br><br>
                    <div>
                        <div id="result-final"></div>
                        <!-- <table id="result-table" class="table table-sm"></table> -->
                    </div>
                </div>

                
            </div>
            <div class="more" id="query">
                <div class="container px-4 px-lg-5 text-center">
                    <br>
                    <h2>QUEURY BUBBLE</h2>
                    <br>
                        <label for="name" class="form-label">인증서:</label><br>
                        <input type="text" class="form-control" id="cert4" name="cert" placeholder="appUser8"><br>
                        <label for="bid" class="form-label">버블아이디:</label><br>
                        <input type="text" class="form-control" id="bid4" name="bid" placeholder="b1"><br>
                        <br>
                        <button id="read-btn" class="btn btn-xl btn-outline-primary fw-bold">버블 조회</button>&nbsp
                    <br><br>
                    <div>
                        <div id="result-read"></div>
                        <table id="result-table" class="table table-sm"></table>
                    </div>
                </div>

                
            </div>
            <div class="more" id="history">
                <div class="container px-4 px-lg-5 text-center">
                    <br>
                    <h2>BUBBLE'S HISTORY</h2>
                    <br>
                        <label for="name" class="form-label">인증서:</label><br>
                        <input type="text" class="form-control" id="cert5" name="cert" placeholder="appUser8"><br>
                        <label for="bid" class="form-label">버블아이디:</label><br>
                        <input type="text" class="form-control" id="bid5" name="bid" placeholder="b1"><br>
                        <br>
                        <button id="history-btn" class="btn btn-xl btn-outline-primary fw-bold">버블이력조회</button> &nbsp
                    <br><br>
                    <div>
                        <div id="result-history"></div>
                        <table id="result-table2" class="table table-sm"></table>
                    </div>
                </div>

                
            </div>
            <div class="more" id="registerU">
                <div class="container px-4 px-lg-5 text-center">
                    <br>
                    <h2>REGISTER USER</h2>
                    <br>
            
                    <label for="name" class="form-label">사용자이름:</label>
                    <br>
                    <input type="text" class="form-control" id="name6" name="name" placeholder="appUser">
                    <br>
                    <label for="department" class="form-label">사용자부서:</label>
                    <br>
                    <input type="text" class="form-control" id="department6" name="department" placeholder="org1.department1">
                    <br>
                    <button id="admin-btn" class="btn btn-xl btn-outline-primary fw-bold">관리자 인증서 생성</button> &nbsp;
                    <button id="create-btn" class="btn btn-xl btn-outline-primary fw-bold">사용자 인증서 생성</button> <br><br>
                    <button id="list-btn" class="btn btn-xl btn-outline-primary fw-bold">인증서목록</button> &nbsp;
                    <br><br>
                    <p class="lead fw-bold">-- RESULT AREA --</p>
            
                    <div id="result"></div>
                </div>

                
            </div>
        </section>
        <div class="more" id="more">
            <section class="content-section bg-primary text-white">
                <div class="container px-4 px-lg-5 text-center">
                    <h2 class="mb-4">The buttons below are impossible to resist...</h2>
                    <a class="btn btn-xl btn-light me-4" href="#!">Click Me!</a>
                    <a class="btn btn-xl btn-dark" href="#!">Look at Me!</a>
                </div>
            </section>
        </div>
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container px-4 px-lg-5">
                <ul class="list-inline mb-5">
                    <li class="list-inline-item">
                        <a class="social-link rounded-circle text-white mr-3" href="#!"><i class="icon-social-facebook"></i></a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social-link rounded-circle text-white mr-3" href="#!"><i class="icon-social-twitter"></i></a>
                    </li>
                    <li class="list-inline-item">
                        <a class="social-link rounded-circle text-white" href="#!"><i class="icon-social-github"></i></a>
                    </li>
                </ul>
                <p class="text-muted small mb-0">Copyright &copy; BubbleBubble 2022</p>
            </div>
        </footer>
        <!-- Scroll to Top Button-->
        <a class="scroll-to-top rounded" href="#page-top"><i class="fas fa-angle-up"></i></a>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>

    
    <script>
        $("#register-btn").click( function(){
            var cert = $("#cert1").val();
            var btype = $("#btype1").val();
            var bid = $("#bid1").val();
            var uniID = $("#uniID1").val();
            var totalprice = $("#totalprice1").val();
            var unicount = $("#unicount1").val();
            console.log("register-btn clicked", btype, bid, totalprice, unicount, uniID);
    
            $.post('/ServiceBubble', {cert, btype, bid, totalprice, unicount, uniID}, function(data){
    
                $("#result-register").empty();
                // result message 표시
                $("#result-register").append("<i class='bi bi-chat-square-dots'></i>");
                $("#result-register").append("<p class='lead'>"+JSON.stringify(data)+"</p>");
                
                // result table 표시
                
                if (data.result == "success") {
                    $("#result-register").append("<i class='bi bi-emoji-laughing'></i>");
                } else {
                    $("#result-register").append("<i class='bi bi-exclamation-square-fill'></i>");
                }
            });
        });
    
        $("#join-btn").click( function(){
            var cert = $("#cert2").val();
            var bid = $("#bid2").val();
            var uniID = $("#uniID2").val();
            console.log("join-btn clicked", bid, uniID);
    
            $.post('/ServiceBubble/join', {cert, bid, uniID}, function(data){
                
                $("#result-join").empty();
    
                // result message 표시
                $("#result-join").append("<i class='bi bi-chat-square-dots'></i>");
                $("#result-join").append("<p class='lead'>"+JSON.stringify(data)+"</p>");
                
                // result table 표시
                
                if (data.result == "success") {
                    $("#result-join").append("<i class='bi bi-emoji-laughing'></i>");
                } else {
                    $("#result-join").append("<i class='bi bi-exclamation-square-fill'></i>");
                }
            });
        });
    
        $("#final-btn").click( function(){
            var cert = $("#cert3").val();
            var bid = $("#bid3").val();
            var uniID = $("#uniID3").val();
            console.log("final-btn clicked", bid, uniID);
    
            $.post('/ServiceBubble/finalize', {cert, bid, uniID}, function(data){
                
                $("#result-final").empty();
    
                // result message 표시
                $("#result-final").append("<i class='bi bi-chat-square-dots'></i>");
                $("#result-final").append("<p class='lead'>"+JSON.stringify(data)+"</p>");
                
                // result table 표시
                
                if (data.result == "success") {
                    $("#result-final").append("<i class='bi bi-emoji-laughing'></i>");
                } else {
                    $("#result-final").append("<i class='bi bi-exclamation-square-fill'></i>");
                }
            });
        });
    
        $("#read-btn").click( function(){
            var cert = $("#cert4").val();
            var bid = $("#bid4").val();
            console.log("read-btn clicked", bid);
    
            $.get('/ServiceBubble', {cert, bid}, function(data){
                
                $("#result-read").empty();
    
                // result message 표시
                $("#result-read").append("<i class='bi bi-chat-square-dots'></i>");
                $("#result-read").append("<p class='lead'>"+JSON.stringify(data)+"</p>");
                
                // result table 표시
                $("#result-table").empty()
                $("#result-read").append("<i class='bi bi-table'></i>");
                if (data.result == "success") {
                    $("#result-table").append("<tr><td>BubbleType:</td><td>"+data.message.btype+"</td></tr>");
                    $("#result-table").append("<tr><td>BubbleID:</td><td>"+data.message.bid+"</td></tr>");
                    $("#result-table").append("<tr><td>TotalPrice:</td><td>"+data.message.totalprice+"</td></tr>");
                    $("#result-table").append("<tr><td>UniCount:</td><td>"+data.message.unicount+"</td></tr>");
                    $("#result-table").append("<tr><td>PerPrice:</td><td>"+data.message.totalprice/data.message.unicount+"</td></tr>");
                    $("#result-table").append("<tr><td>Status:</td><td>"+data.message.status+"</td></tr>");
                    $("#result-table").append("<tr><td>UniList:</td><td>"+data.message.unies+"</td></tr>");
                } else {
                    $("#result-table").append("<tr><td>BubbleType:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>BubbleID:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>TotalPrice:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>UniCount:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>PerPrice:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>Status:</td><td> </td></tr>");
                    $("#result-table").append("<tr><td>UniList:</td><td> </td></tr>");
                }
            });
        });
    
        $("#history-btn").click( function(){
            var cert = $("#cert5").val();
            var bid = $("#bid5").val();
    
            console.log("history-btn clicked", bid);
    
            $.get('/ServiceBubble/history', {cert, bid}, function(data){
                
                $("#result-history").empty();
    
                // result message 표시
                $("#result-history").append("<i class='bi bi-chat-square-dots'></i>");
                $("#result-history").append("<p class='lead'>"+JSON.stringify(data)+"</p>");
                
                // result table 표시
                $("#result-table").empty()
                $("#result-history").append("<i class='bi bi-table'></i>");
                if (data.result == "success") {
                    for(var i = 0; i< data.message.length; i++){
                        $("#result-table2").append("<tr><td>RECORD:</td><td>"+JSON.stringify(data.message[i].record)+"</td></tr>");
                        $("#result-table2").append("<tr><td>TXID:</td><td>"+data.message[i].txId+"</td></tr>");
                        $("#result-table2").append("<tr><td>TIMESTAMP:</td><td>"+data.message[i].timestamp+"</td></tr>");
                        $("#result-table2").append("<tr><td>ISDELETE:</td><td>"+data.message[i].isDelete+"</td></tr>");
                    }
                } else {
                    $("#result-table2").append("<tr><td>RECORD:</td><td> </td></tr>");
                    $("#result-table2").append("<tr><td>TXID:</td><td> </td></tr>");
                    $("#result-table2").append("<tr><td>TIMESTAMP:</td><td> </td></tr>");
                    $("#result-table2").append("<tr><td>ISDELETE:</td><td> </td></tr>");
                }
            });
        });
    
        $('#list-btn').click(function () {
    
    $.get('/user/list', function (data) {
        // data result => success, fail
        $("#result").empty();
            $("#result").append("<p class='lead'>USER LIST: " + JSON.stringify(data) + "</p>");
        var ids = data.id.split(",");
        if (data.result == 'success') { // success 이미지 result에 삽입
            $("#result").append("<ol id='list' class='list-group list-group-numbered'>");
            for(var i = 0; i<ids.length; i++){
                $("#list").append("<li class='list-group-item'>"+ids[i]+"</li>");
            }
            $("#result").append("<img src='/public/images/ok.png' width='200'>");
        } else { // failed 이미지 result에 삽입
            $("#result").append("<img src='/public/images/nok.png' width='200'>");
        }
    });
    });
    
    $('#admin-btn').click(function () {
    
    $.post('/admin', function (data) {
        // data result => success, fail
        $("#result").empty();
        $("#result").append("<p class='lead'>ADMIN: " + JSON.stringify(data) + "</p>");
    
        if (data.result == 'success') { // success 이미지 result에 삽입
            $("#result").append("<img src='/public/images/ok.png' width='200'>");
        } else { // failed 이미지 result에 삽입
            $("#result").append("<img src='/public/images/nok.png' width='200'>");
        }
    });
    });
    
    
    $('#admin-btn').click(function () {
    
    $.post('/admin', function (data) {
        // data result => success, fail
        $("#result").empty();
        $("#result").append("<p class='lead'>ADMIN: " + JSON.stringify(data) + "</p>");
    
        if (data.result == 'success') { // success 이미지 result에 삽입
            $("#result").append("<img src='/public/images/ok.png' width='200'>");
        } else { // failed 이미지 result에 삽입
            $("#result").append("<img src='/public/images/nok.png' width='200'>");
        }
    });
    });

    $('#create-btn').click(function () {
    var name = $('#name6').val();
    var department = $('#department6').val();
    
    console.log(name, department);
    
    $.post('/user', { name, department }, function (data) {
    
        $("#result").empty();
        $("#result").append("<p class='lead'>USER: " + JSON.stringify(data) + "</p>");
    
        if (data.result == 'success') { // success 이미지 result에 삽입
            $("#result").append("<img src='/public/images/ok.png' width='200'>");
        } else { // failed 이미지 result에 삽입
            $("#result").append("<img src='/public/images/nok.png' width='200'>");
        }
    });
    });
    </script>
</html>
